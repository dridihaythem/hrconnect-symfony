{% extends 'back_office.html.twig' %}

{% block title %}Nouvelle Réclamation{% endblock %}

{% block body %}
<div class="container mt-4">
    <div class="breadcrumb-path mb-4">
        <ul class="breadcrumb">
            <li class="breadcrumb-item">
                <a href="{{ path('app_back_office') }}">
                    <img src="{{ asset('assets/img/dash.png')}}" class="mr-2" alt="breadcrumb"/> Home
                </a>
            </li>
            <li class="breadcrumb-item">
                <a href="{{ path('app_reclamation_index') }}">Reclamations</a>
            </li>
            <li class="breadcrumb-item active">Nouvelle Réclamation</li>
        </ul>
        <h3>Ajouter une Réclamation</h3>
    </div>

    <div class="card p-4">
        {{ form_start(form) }}
            <div class="row">
                <div class="col-md-6 mb-3">
                    {{ form_label(form.employeeName) }}
                    {{ form_widget(form.employeeName) }}
                    {{ form_errors(form.employeeName) }}
                </div>

                <div class="col-md-6 mb-3">
                    {{ form_label(form.type) }}
                    {{ form_widget(form.type) }}
                    {{ form_errors(form.type) }}
                </div>

                <div class="col-md-12 mb-3">
                    {{ form_label(form.description) }}
                    {{ form_widget(form.description) }}
                    {{ form_errors(form.description) }}
                </div>

                <div class="col-md-6 mb-3">
                    {{ form_label(form.priority) }}
                    {{ form_widget(form.priority) }}
                    {{ form_errors(form.priority) }}
                </div>
            </div>

            <button type="submit" class="btn btn-primary">Envoyer</button>
            <a href="{{ path('app_reclamation_index') }}" class="btn btn-secondary">Annuler</a>
        {{ form_end(form) }}
    </div>
</div>

{# ✅ SweetAlert2 flash message popup #}
{% for label, messages in app.flashes %}
    {% for message in messages %}
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <script>
            Swal.fire({
                icon: '{{ label == "success" ? "success" : "error" }}',
                title: '{{ label|capitalize }}',
                text: '{{ message }}',
                timer: 3000,
                showConfirmButton: false
            });
        </script>
    {% endfor %}
{% endfor %}
{% endblock %}
